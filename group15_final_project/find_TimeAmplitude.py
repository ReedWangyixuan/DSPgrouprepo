#!/usr/bin/env python3
# -*- coding: utf-8 -*-

'''
This py can find the fix amplitude and the time interval of each version.
For example,v4.4.1...v4.4.3's list is like [[2, 81.0], [20, 82.0], [4, 111.0]]
'''

__author__ = "Group 15 members in DataScience of Lanzhou University"
__copyright__ = "Copyright 2020, Group15 in DataScience of Lanzhou University , China"
__license__ = "GPL V3"
__version__ = "1.0"
__maintainer__ = "Chunyao Dong"
__email__ = ["dongchy18@lzu.edu.cn"]
__status__ = "Done"


from getTimeInterval import *
from getFixAmplitude import *

def time_and_amplitude(scope,repo):
    addend = []
    times = []
    scope_begin = int(scope[0].split(".")[-1])
    scope_end = int(scope[1].split(".")[-1])
    momversion = scope[0].strip(str(scope_begin))
    for i in range(scope_begin, scope_end + 1):
        kernelrange = momversion + str(i) + "..." + momversion + str(i + 1)
        amp = FixAmplitude(kernelrange,repo)
        res = amp.getFixAmplitude()
        for i in res:
            addend.append(int(i[0]) + int(i[1]))
    for i in range(scope_begin, scope_end + 1):
        kernel = momversion + str(i) + "..." + momversion + str(i + 1)
        time_interval = FixTimeInterval(kernel,repo)
        interval = time_interval.get_time_interval()
        end_time = sum(interval)
        times.append(end_time // 24 // 3600)
    final = []
    for i in range(len(times)):
        final.append([addend[i], times[i]])
    return final

if __name__ == "__main__":
    repo = "/Users/apple/linux-stable"
    scope = ("v4.4.1","v4.4.216")
    print(time_and_amplitude(scope,repo))
    #[[2, 81.0], [20, 82.0], [4, 111.0], [60, 47.0], [6, 64.0], [31, 132.0], [55, 212.0], [5, 195.0], [169, 112.0], [252, 33.0], [1, 188.0], [6, 394.0], [5, 41.0], [2, 34.0], [20, 91.0], [4, 243.0], [13, 185.0], [4, 136.0], [23, 123.0], [23, 325.0], [7, 239.0], [23, 246.0], [4, 330.0], [2, 73.0], [2, 0], [15, 49.0], [4, 228.0], [11, 302.0], [28, 0], [2, 79.0], [6, 148.0], [6, 55.0], [6, 117.0], [1, 84.0], [5, 89.0], [3, 29.0], [2, 19.0], [9, 308.0], [10, 161.0], [10, 75.0], [6, 100.0], [3, 64.0], [3, 104.0], [3, 188.0], [2, 102.0], [6, 13.0], [3, 22.0], [3, 21.0], [7, 8.0], [44, 49.0], [8, 264.0], [9, 113.0], [1, 91.0], [8, 314.0], [52, 86.0], [37, 476.0], [1, 215.0], [1, 48.0], [1, 89.0], [18, 293.0], [11, 96.0], [4, 368.0], [1, 13.0], [26, 416.0], [2, 447.0], [6, 127.0], [6, 253.0], [11, 75.0], [7, 409.0], [1, 22.0], [34, 489.0], [1, 378.0], [4, 137.0], [3, 176.0], [35, 531.0], [2, 568.0], [55, 262.0], [2, 115.0], [2, 213.0], [7, 204.0], [1, 51.0], [2, 58.0], [14, 623.0], [3, 577.0], [11, 116.0], [21, 29.0], [134, 75.0], [2, 326.0], [2, 572.0], [3, 139.0], [233, 36.0], [87, 34.0], [23, 226.0], [98, 52.0], [35, 65.0], [14, 382.0], [4, 343.0], [3, 637.0], [91, 182.0], [13, 521.0], [2, 0], [2, 195.0], [5, 113.0], [27, 331.0], [5, 296.0], [85, 352.0], [6, 569.0], [2, 204.0], [3, 0], [1, 38.0], [1, 757.0], [18, 303.0], [4, 793.0], [2, 127.0], [10, 601.0], [8, 562.0], [11, 826.0], [1, 669.0], [33, 36.0], [2, 10.0], [37, 664.0], [9, 504.0], [61, 455.0], [25, 197.0], [4, 14.0], [3, 699.0], [3, 373.0], [1, 619.0], [3, 15.0], [35, 863.0], [2, 55.0], [20, 202.0], [5, 245.0], [1, 0], [26, 17.0], [1, 83.0], [6, 867.0], [142, 683.0], [15, 144.0], [4, 36.0], [4, 0], [1, 46.0], [1, 695.0], [2, 532.0], [1, 97.0], [2, 26.0], [2, 734.0], [6, 428.0], [2, 0], [2, 50.0], [2, 77.0], [13, 419.0], [7, 404.0], [2, 682.0], [2, 370.0], [2, 868.0], [37, 867.0], [2, 6.0], [53, 122.0], [56, 31.0], [14, 20.0], [2, 992.0], [4, 366.0], [2, 460.0], [6, 998.0], [7, 454.0], [2, 847.0], [4, 259.0], [5, 67.0], [16, 864.0], [21, 110.0], [50, 70.0], [8, 237.0], [10, 664.0], [4, 1167.0], [10, 841.0], [3, 1169.0], [2, 1042.0], [1, 936.0], [16, 870.0], [119, 0], [28, 162.0], [2, 0], [9, 680.0], [2, 42.0], [2, 390.0], [1, 90.0], [6, 34.0], [20, 508.0], [7, 74.0], [6, 152.0], [15, 328.0], [2, 230.0], [19, 218.0], [8, 197.0], [54, 161.0], [2, 38.0], [41, 124.0], [13, 68.0], [3, 88.0], [5, 546.0], [2, 489.0], [21, 1134.0], [4, 0], [7, 368.0], [2, 818.0], [15, 113.0], [21, 89.0], [2, 95.0], [12, 291.0], [17, 570.0], [1, 73.0], [2, 89.0], [4, 190.0], [3, 417.0]]



